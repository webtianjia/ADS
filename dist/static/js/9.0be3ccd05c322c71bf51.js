webpackJsonp([9],{SxEH:function(e,t,s){"use strict";var r=s("HNM5");t.a={getCustomer:function(e){return r.a.post("/clientCustomer/getCustomer",e)},editCustomer:function(e){return r.a.post("/clientCustomer/editCustomer",e)},sendCode:function(e){return r.a.post("/clientCustomer/sendCode",e)},resetPassWord:function(e){return r.a.post("/clientCustomer/resetPassWord",e)}}},"nF/M":function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=s("SxEH"),a=s("NC6I"),n=s.n(a),o={name:"Personal-information",data:function(){var e=this;return{updateModal:!1,updateCustomerEntity:!1,customerEntity:{company_full_name:"",company_name:"",salesman_name:"",salesman_phone:"",salesman_email:"",treasurer_name:"",treasurer_phone:"",treasurer_email:"",company_address:""},rules:{company_full_name:[{required:!0,message:"请输入公司全称",trigger:"change"}],company_name:[{required:!0,message:"请输入公司简称",trigger:"change"}],salesman_name:[{required:!0,message:"请输入业务联系人姓名",trigger:"change"}],salesman_phone:[{required:!0,message:"请输入业务联系人电话",trigger:"change"}],salesman_email:[{required:!0,message:"请输入业务联系人邮箱",trigger:"change"}],treasurer_name:[{required:!0,message:"请输入财务联系人姓名",trigger:"change"}],treasurer_phone:[{required:!0,message:"请输入财务联系人电话",trigger:"change"}],treasurer_email:[{required:!0,message:"请输入财务联系人邮箱",trigger:"change"}],company_address:[{required:!0,message:"请输入公司地址",trigger:"change"}]},resetPassWord:{code:"",new_pwd:"",full_pwd:""},resetPassWordRules:{code:[{required:!0,message:"请输入验证码",trigger:"blur"}],new_pwd:[{validator:function(t,s,r){""===s?r(new Error("请输入密码")):(""!==e.resetPassWord.new_pwd&&e.$refs.resetPassWord.validateField("full_pwd"),r())},trigger:"blur"}],full_pwd:[{validator:function(t,s,r){""===s?r(new Error("请再次输入密码")):s!==e.resetPassWord.new_pwd?r(new Error("两次输入密码不一致!")):r()},trigger:"blur"}]},Timeout:120}},methods:{editCustomer:function(){this.updateCustomerEntity=!0},reset_editCustomer:function(){this.updateCustomerEntity=!1,this.$refs.customerEntity.clearValidate(),this.getCustomer()},submit_editCustomer:function(e){var t=this;this.$refs[e].validate(function(e){e&&r.a.editCustomer(t.customerEntity).then(function(e){1==e.code&&t.reset_editCustomer()})})},show_updateModal:function(e){this.updateModal=!0,this.resetForm(e)},submit_resetPassWord:function(e){var t=this;this.$refs[e].validate(function(e){if(e){var s=t.resetPassWord;s.new_pwd=n()(s.new_pwd),r.a.resetPassWord(t.resetPassWord).then(function(e){1==e.code&&(t.$message.success(e.msg),t.$ls.clear("USER_TOKEN"),t.$router.replace("/base/login"))})}})},sendCode:function(){var e=this;r.a.sendCode().then(function(t){console.log(t),1==t.code&&(e.$message.success("验证码发送成功，请注意查看"),e.timer())})},timer:function(){var e=this,t=setInterval(function(){e.Timeout--,e.Timeout<=0&&(clearInterval(t),e.Timeout=120)},1e3)},getCustomer:function(){var e=this;r.a.getCustomer().then(function(t){1==t.code&&(e.customerEntity=t.data,e.updateCustomerEntity||e.resetForm("customerEntity")),console.log(t)})},resetForm:function(e){this.$refs[e]&&this.$refs[e].resetFields()}},created:function(){this.getCustomer()}},i={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("el-card",[s("div",{attrs:{slot:"header"},slot:"header"},[s("span",{staticClass:"m-r-lg"},[e._v("用户名：XiuEx")]),e._v(" "),s("el-button",{attrs:{type:"primary"},on:{click:e.editCustomer}},[e._v("修改账号信息")]),e._v(" "),s("el-button",{attrs:{type:"primary"},on:{click:function(t){e.show_updateModal("resetPassWord")}}},[e._v("修改登录密码")])],1),e._v(" "),s("el-form",{ref:"customerEntity",staticStyle:{width:"600px"},attrs:{disabled:!e.updateCustomerEntity,model:e.customerEntity,rules:e.rules,"label-width":"140px"}},[s("el-form-item",{attrs:{label:"公司名称：",prop:"company_full_name"}},[s("el-input",{model:{value:e.customerEntity.company_full_name,callback:function(t){e.$set(e.customerEntity,"company_full_name",t)},expression:"customerEntity.company_full_name"}})],1),e._v(" "),s("el-form-item",{attrs:{label:"公司简称：",prop:"company_name"}},[s("el-input",{model:{value:e.customerEntity.company_name,callback:function(t){e.$set(e.customerEntity,"company_name",t)},expression:"customerEntity.company_name"}})],1),e._v(" "),s("el-form-item",{attrs:{label:"业务联系人：",prop:"salesman_name"}},[s("el-input",{model:{value:e.customerEntity.salesman_name,callback:function(t){e.$set(e.customerEntity,"salesman_name",t)},expression:"customerEntity.salesman_name"}})],1),e._v(" "),s("el-form-item",{attrs:{label:"业务联系人电话：",prop:"salesman_phone"}},[s("el-input",{model:{value:e.customerEntity.salesman_phone,callback:function(t){e.$set(e.customerEntity,"salesman_phone",t)},expression:"customerEntity.salesman_phone"}})],1),e._v(" "),s("el-form-item",{attrs:{label:"业务联系人邮箱：",prop:"salesman_email"}},[s("el-input",{model:{value:e.customerEntity.salesman_email,callback:function(t){e.$set(e.customerEntity,"salesman_email",t)},expression:"customerEntity.salesman_email"}})],1),e._v(" "),s("el-form-item",{attrs:{label:"财务联系人：",prop:"treasurer_name"}},[s("el-input",{model:{value:e.customerEntity.treasurer_name,callback:function(t){e.$set(e.customerEntity,"treasurer_name",t)},expression:"customerEntity.treasurer_name"}})],1),e._v(" "),s("el-form-item",{attrs:{label:"财务联系人电话：",prop:"treasurer_phone"}},[s("el-input",{model:{value:e.customerEntity.treasurer_phone,callback:function(t){e.$set(e.customerEntity,"treasurer_phone",t)},expression:"customerEntity.treasurer_phone"}})],1),e._v(" "),s("el-form-item",{attrs:{label:"财务联系人邮箱：",prop:"treasurer_email"}},[s("el-input",{model:{value:e.customerEntity.treasurer_email,callback:function(t){e.$set(e.customerEntity,"treasurer_email",t)},expression:"customerEntity.treasurer_email"}})],1),e._v(" "),s("el-form-item",{attrs:{label:"公司地址：",prop:"company_address"}},[s("el-input",{model:{value:e.customerEntity.company_address,callback:function(t){e.$set(e.customerEntity,"company_address",t)},expression:"customerEntity.company_address"}})],1),e._v(" "),e.updateCustomerEntity?s("el-form-item",{attrs:{label:""}},[s("el-button",{attrs:{type:"primary"},on:{click:function(t){e.submit_editCustomer("customerEntity")}}},[e._v("确认")]),e._v(" "),s("el-button",{on:{click:e.reset_editCustomer}},[e._v("取消")])],1):e._e()],1)],1),e._v(" "),s("el-dialog",{attrs:{title:"修改登录密码",visible:e.updateModal,width:"600px"},on:{"update:visible":function(t){e.updateModal=t}}},[s("el-form",{ref:"resetPassWord",staticStyle:{width:"500px"},attrs:{model:e.resetPassWord,rules:e.resetPassWordRules,"label-width":"140px"}},[s("el-form-item",{attrs:{label:"验证码：",prop:"code"}},[s("el-input",{staticStyle:{width:"244px"},attrs:{placeholder:"请输入邮箱验证码"},model:{value:e.resetPassWord.code,callback:function(t){e.$set(e.resetPassWord,"code",t)},expression:"resetPassWord.code"}}),e._v(" "),s("el-button",{staticStyle:{width:"112px"},attrs:{disabled:120!=e.Timeout},on:{click:e.sendCode}},[e._v(e._s(120==e.Timeout?"获取验证码":e.Timeout+"s"))])],1),e._v(" "),s("el-form-item",{attrs:{label:"新密码：",prop:"new_pwd"}},[s("el-input",{attrs:{type:"password",placeholder:"请输入新密码"},model:{value:e.resetPassWord.new_pwd,callback:function(t){e.$set(e.resetPassWord,"new_pwd",t)},expression:"resetPassWord.new_pwd"}})],1),e._v(" "),s("el-form-item",{attrs:{label:"确认密码：",prop:"full_pwd"}},[s("el-input",{attrs:{type:"password",placeholder:"请确认密码"},model:{value:e.resetPassWord.full_pwd,callback:function(t){e.$set(e.resetPassWord,"full_pwd",t)},expression:"resetPassWord.full_pwd"}})],1)],1),e._v(" "),s("div",{staticClass:"text-center",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{attrs:{type:"primary"},on:{click:function(t){e.submit_resetPassWord("resetPassWord")}}},[e._v("确定")]),e._v(" "),s("el-button",{on:{click:function(t){e.updateModal=!1}}},[e._v("取消")])],1)],1)],1)},staticRenderFns:[]};var l=s("VU/8")(o,i,!1,function(e){s("yHZl")},null,null);t.default=l.exports},yHZl:function(e,t){}});
//# sourceMappingURL=9.0be3ccd05c322c71bf51.js.map